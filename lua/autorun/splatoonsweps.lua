list.Add( "NPCUsableWeapons", { class = "splattershot",	title = "Splattershot" }  )
list.Add( "NPCUsableWeapons", { class = "splattershot_tentatek",	title = "Tentatek Splattershot" }  )
list.Add( "NPCUsableWeapons", { class = "splattershot_wasabi",	title = "Wasabi Splattershot" }  )
list.Add( "NPCUsableWeapons", { class = "heroshotreplica",	title = "Hero Shot Replica" }  )
list.Add( "NPCUsableWeapons", { class = "octoshotreplica",	title = "Octoshot Replica" }  )
list.Add( "NPCUsableWeapons", { class = "splattershotJr",	title = "Splattershot Jr." }  )
list.Add( "NPCUsableWeapons", { class = "splattershotJr_custom",	title = "Custom Splattershot Jr." }  )
list.Add( "NPCUsableWeapons", { class = "splattershotPro",	title = "Splattershot Pro" }  )
list.Add( "NPCUsableWeapons", { class = "splattershotPro_forge",	title = "Forge Splattershot Pro" }  )
list.Add( "NPCUsableWeapons", { class = "splattershotPro_berry",	title = "Berry Splattershot Pro" }  )
list.Add( "NPCUsableWeapons", { class = "_52gallon",	title = ".52 Gallon" }  )
list.Add( "NPCUsableWeapons", { class = "_52gallondeco",	title = ".52 Gallon Deco" }  )
list.Add( "NPCUsableWeapons", { class = "_96gallon",	title = ".96 Gallon" }  )
list.Add( "NPCUsableWeapons", { class = "_96gallondeco",	title = ".96 Gallon Deco" }  )
list.Add( "NPCUsableWeapons", { class = "jetsquelcher",	title = "Jet Squelcher" }  )
list.Add( "NPCUsableWeapons", { class = "jetsquelcher_custom",	title = "Custom Jet Squelcher" }  )
list.Add( "NPCUsableWeapons", { class = "dualsquelcher",	title = "Dual Squelcher" }  )
list.Add( "NPCUsableWeapons", { class = "dualsquelcher_custom",	title = "Custom Dual Squelcher" }  )
list.Add( "NPCUsableWeapons", { class = "n-zap83",	title = "N-ZAP '83" }  )
list.Add( "NPCUsableWeapons", { class = "n-zap85",	title = "N-ZAP '85" }  )
list.Add( "NPCUsableWeapons", { class = "n-zap89",	title = "N-ZAP '89" }  )
list.Add( "NPCUsableWeapons", { class = "splash-o-matic",	title = "Splash-o-Matic" }  )
list.Add( "NPCUsableWeapons", { class = "splash-o-matic_neo",	title = "Neo Splash-o-Matic" }  )
list.Add( "NPCUsableWeapons", { class = "sploosh-o-matic",	title = "Sploosh-o-Matic" }  )
list.Add( "NPCUsableWeapons", { class = "sploosh-o-matic_neo",	title = "Neo Sploosh-o-Matic" }  )
list.Add( "NPCUsableWeapons", { class = "sploosh-o-matic_7",	title = "Sploosh-o-Matic 7" }  )
list.Add( "NPCUsableWeapons", { class = "aerosprayMG",	title = "Aerospray MG" }  )
list.Add( "NPCUsableWeapons", { class = "aerosprayRG",	title = "Aerospray RG" }  )
list.Add( "NPCUsableWeapons", { class = "aerosprayPG",	title = "Aerospray PG" }  )
list.Add( "NPCUsableWeapons", { class = "L3nozzlenose",	title = "L-3 Nozzlenose" }  )
list.Add( "NPCUsableWeapons", { class = "L3nozzlenoseD",	title = "L-3 Nozzlenose D" }  )
list.Add( "NPCUsableWeapons", { class = "H3nozzlenose",	title = "H-3 Nozzlenose" }  )
list.Add( "NPCUsableWeapons", { class = "H3nozzlenoseD",	title = "H-3 Nozzlenose D" }  )
list.Add( "NPCUsableWeapons", { class = "H3nozzlenose_cherry",	title = "Cherry H-3 Nozzlenose" }  )
list.Add( "NPCUsableWeapons", { class = "blaster",	title = "Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "customblaster",	title = "Custom Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "rangeblaster",	title = "Range Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "customrangeblaster",	title = "Custom Range Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "rangeblaster_grim",	title = "Grim Range Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "lunablaster",	title = "Luna Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "lunablaster_neo",	title = "Luna Blaster Neo" }  )
list.Add( "NPCUsableWeapons", { class = "rapidblaster",	title = "Rapid Blaster" }  )
list.Add( "NPCUsableWeapons", { class = "rapidblasterdeco",	title = "Rapid Blaster Deco" }  )
list.Add( "NPCUsableWeapons", { class = "rapidblasterPro",	title = "Rapid Blaster Pro" }  )
list.Add( "NPCUsableWeapons", { class = "rapidblasterProdeco",	title = "Rapid Blaster Pro Deco" }  )
list.Add( "NPCUsableWeapons", { class = "heavysplatling",	title = "Heavy Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "heavysplatling_deco",	title = "Heavy Splatling Deco" }  )
list.Add( "NPCUsableWeapons", { class = "heavysplatling_remix",	title = "Heavy Splatling Remix" }  )
list.Add( "NPCUsableWeapons", { class = "hydrasplatling",	title = "Hydra Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "hydrasplatling_custom",	title = "Custom Hydra Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "minisplatling",	title = "Mini Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "minisplatling_zink",	title = "Zink Mini Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "minisplatling_refurbished",	title = "Refurbished Mini Splatling" }  )
list.Add( "NPCUsableWeapons", { class = "splatroller",	title = "Splat Roller" }  )
list.Add( "NPCUsableWeapons", { class = "splatroller_krakon",	title = "Krak-On Splat Roller" }  )
list.Add( "NPCUsableWeapons", { class = "splatroller_corocoro",	title = "CoroCoro Splat Roller" }  )
list.Add( "NPCUsableWeapons", { class = "weapon_roller_cleaner",	title = "Splat Roller Cleaner" }  )
list.Add( "NPCUsableWeapons", { class = "herorollerreplica",	title = "Hero Roller Replica" }  )
list.Add( "NPCUsableWeapons", { class = "carbonroller",	title = "Carbon Roller" }  )
list.Add( "NPCUsableWeapons", { class = "carbonroller_deco",	title = "Carbon Roller Deco" }  )
list.Add( "NPCUsableWeapons", { class = "dynamoroller",	title = "Dynamo Roller" }  )
list.Add( "NPCUsableWeapons", { class = "dynamoroller_gold",	title = "Gold Dynamo Roller" }  )
list.Add( "NPCUsableWeapons", { class = "dynamoroller_tempered",	title = "Tempered Dynamo Roller" }  )
list.Add( "NPCUsableWeapons", { class = "splatcharger",	title = "Splat Charger" }  )
list.Add( "NPCUsableWeapons", { class = "splatcharger_kelp",	title = "Kelp Splat Charger" }  )
list.Add( "NPCUsableWeapons", { class = "splatcharger_bento",	title = "Bento Splat Charger" }  )
list.Add( "NPCUsableWeapons", { class = "splatterscope",	title = "Splatterscope" }  )
list.Add( "NPCUsableWeapons", { class = "splatterscope_kelp",	title = "Kelp Splatterscope" }  )
list.Add( "NPCUsableWeapons", { class = "splatterscope_bento",	title = "Kelp Splatterscope" }  )
list.Add( "NPCUsableWeapons", { class = "herochargerreplica",	title = "Hero Charger Replica" }  )
list.Add( "NPCUsableWeapons", { class = "e-liter3k",	title = "E-Liter 3K" }  )
list.Add( "NPCUsableWeapons", { class = "custom_e-liter3k",	title = "Custom E-Liter 3K" }  )
list.Add( "NPCUsableWeapons", { class = "e-liter3k_scope",	title = "E-Liter 3K Scope" }  )
list.Add( "NPCUsableWeapons", { class = "custom_e-liter3k_scope",	title = "Custom E-Liter 3K Scope" }  )
list.Add( "NPCUsableWeapons", { class = "classicsquiffer",	title = "Classic Squiffer" }  )
list.Add( "NPCUsableWeapons", { class = "newsquiffer",	title = "New Squiffer" }  )
list.Add( "NPCUsableWeapons", { class = "freshsquiffer",	title = "Fresh Squiffer" }  )
list.Add( "NPCUsableWeapons", { class = "bamboozler14mk1",	title = "Bamboozler 14 MK I" }  )
list.Add( "NPCUsableWeapons", { class = "bamboozler14mk2",	title = "Bamboozler 14 MK II" }  )
list.Add( "NPCUsableWeapons", { class = "bamboozler14mk3",	title = "Bamboozler 14 MK III" }  )

local dmg = Sound("SplatoonSWEPs/HitEffectiveCommon02.wav")
local direct = Sound("SplatoonSWEPs/ShotExplosionDirect00.mp3")

if SERVER then
	CreateConVar("sv_splatoon_automatic_disappear", 180, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Time to automatically disappear ink(seconds).  0 to disable.")
	CreateConVar("sv_splatoon_npc_inkcolor", 5, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Determines NPC's ink color. 1: Orange  2: Pink  3: Purple  4: Blue  5: Cyan  6: Green   0 is its own color.")
	CreateConVar("sv_splatoon_ff", 0, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Can Friendly Fire. 1 to allow FF.")
else
	CreateConVar("cl_splatoon_gender", 0, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Determines inkling's gender.  0 is girl, 1 is boy,  2 is octoling.")
	CreateConVar("cl_splatoon_isinkling", 1, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Force to become inkling. 1 is to become inkling.")
	CreateConVar("cl_splatoon_inkcolor", 1, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: Determines SWEP's ink color. 1: Orange  2: Pink  3: Purple  4: Blue  5: Cyan  6: Green   0 is its own color.")
	CreateConVar("cl_splatoon_drawdistance", 27000, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: How far is ink drawn.")
	CreateConVar("cl_splatoon_usedecal", 1, FCVAR_ARCHIVE, 
		"GreatZenkakuMan's Splatoon SWEPs: 0: Use entity model to draw ink.    1: Use decals to draw ink.")
end

--All painting data{Pos, Normal, ColorName}
SplatoonSurfaces = SplatoonSurfaces or {}

util.PrecacheModel("models/props_splatoon/squids/squid_beta.mdl")
util.PrecacheModel("models/drlilrobot/splatoon/ply/inkling_boy.mdl")
util.PrecacheModel("models/drlilrobot/splatoon/ply/inkling_girl.mdl")
util.PrecacheModel("models/props_splatoon/squids/octopus_beta.mdl")
util.PrecacheModel("models/drlilrobot/splatoon/ply/octoling.mdl")

hook.Add("EntityTakeDamage", "splatoonsweps_inkimmune", function (target, dmginfo)
	if not (IsValid(target) and IsValid(dmginfo:GetAttacker())) then return false end
	local attacker = dmginfo:GetAttacker()
	local inktarget, inkdmginfo = target.InkColor, attacker.InkColor
	
	if attacker:GetClass() == "splashootee" and IsValid(attacker.Owner) then
		dmginfo:SetAttacker(attacker.Owner)
		attacker = attacker.Owner
	end
	
	if not inktarget then
		if not isfunction(target.GetActiveWeapon) then
			return false
		elseif target:GetActiveWeapon() then
			inktarget = target:GetActiveWeapon().InkColor
		end
	end
	
	if not inkdmginfo then
		if not isfunction(attacker.GetActiveWeapon) then
			return false
		elseif attacker:GetActiveWeapon() then
			inkdmginfo = attacker:GetActiveWeapon().InkColor
		end
	end
	
	local c = GetConVar("sv_splatoon_ff")
	if inktarget and inkdmginfo then
		if inktarget == inkdmginfo and c:GetInt() == 0 then
			return true
		else
			if target.GetActiveWeapon and attacker.GetActiveWeapon then
				if (attacker:GetActiveWeapon().charge and 
					attacker:GetActiveWeapon().charge >= 100 and
					dmginfo:GetDamage() >= 100) then
					attacker:EmitSound(direct)
				
				elseif not attacker.Blaster then
					attacker:EmitSound(dmg)
				end
			end
			return false
		end
	end
end)
